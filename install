echo "Dowloading ROS-KINETIC..."

sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'
sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116
sudo apt-get update
sudo apt-get install ros-kinetic-desktop-full ros-kinetic-move-base libsdl-image1.2-dev libsdl-dev ros-kinetic-control-* ros-kinetic-osg-markers -y
sudo apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential python-rosdep python-wxtools python-lxml python-pathlib python-h5py libfftw3-* libxml++2.6-* python-scipy python-geolinks python-gdal -y
sudo echo "source /opt/ros/kinetic/setup.bash" >> ~/.bashrc
source ~/.bashrc
sudo rosdep init
rosdep update

echo "DONE!"
echo ""

echo "Creating catkin workspace..."

source /opt/ros/kinetic/setup.bash
mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/
catkin_make

echo "DONE!"
echo ""

echo "Downloading and installing usv_sim stack..."

cd ~/catkin_ws/src
git clone https://github.com/disaster-robotics-proalertas/usv_sim_lsa.git 
git submodule init
git submodule update

echo "DONE!"
echo ""

echo "Compiling the stack and running a scenario..."
./~/catkin_ws/src/usv_sim/scenarios/recompileStack
./~/catkin_ws/src/usv_sim/scenarios
